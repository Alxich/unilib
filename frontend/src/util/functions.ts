import { ParticipantPopulated } from "../../../backend/src/util/types";

import { formatRelative } from "date-fns";
import enUS from "date-fns/locale/en-US";

export const formatUsernames = (
  participants: Array<ParticipantPopulated>,
  myUserId: string
): string => {
  const usernames = participants
    .filter((participant) => participant.user.id != myUserId)
    .map((participant) => participant.user.username);

  return usernames.join(", ");
};

export function formatTimeToPost(createdAt: number | Date | undefined) {
  const formatRelativeLocale = {
    lastWeek: "eeee",
    yesterday: "'Yesterday",
    today: "p",
    other: "MM/dd/yy",
  };

  const value = createdAt
    ? formatRelative(createdAt, new Date(), {
        locale: {
          ...enUS,
          formatRelative: (token) =>
            formatRelativeLocale[token as keyof typeof formatRelativeLocale],
        },
      })
    : "2022-12-22";

  return value;
}

export function returnMeFunnyError(): string {
  const texts = [
    "–û–≥–æ, –ø–æ–º–∏–ª–∫–∞! –©–æ—Å—å –∑–ª–∞–º–∞–ª–æ—Å—å. –ú–∏ –≤—Ä–∞–∂–µ–Ω—ñ —Ç–≤–æ—ó–º –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è–º –¥–ª—è –∑–Ω–∞–π–æ–º—Å—Ç–≤–∞ –∑ –Ω–∞—à–æ—é —á—É–¥–æ–≤–æ—é —Å—Ç–æ—Ä—ñ–Ω–∫–æ—é –ø–æ–º–∏–ª–∫–∏. –¢—Ä–∏–º–∞–π—Å—è, –º–∏ –Ω–µ–∑–∞–±–∞—Ä–æ–º –≤—Å–µ –ø–æ—Ä–µ–º–æ–Ω—Ç—É—î–º–æ —ñ –ø–æ–≤–µ—Ä–Ω–µ–º–æ —Ç–µ–±–µ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —à–ª—è—Ö. –ó–∞—Ä–∞–∑ –∂–µ —Ç–∏ –º–∞—î—à —É–Ω—ñ–∫–∞–ª—å–Ω—É –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –Ω–∞—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø–æ–º–∏–ª–∫–∏ –∑—Å–µ—Ä–µ–¥–∏–Ω–∏!",
    "–û, —â–æ–π–Ω–æ –ø–æ—Ç—Ä–∞–ø–∏–≤ –Ω–∞ –Ω–∞–π—Ü—ñ–∫–∞–≤—ñ—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø–æ–º–∏–ª–æ–∫! –¢–∏ —â–∞—Å–ª–∏–≤—á–∏–∫, –¥—Ä—É–∂–µ! –ê–ª–µ, –Ω–∞ –∂–∞–ª—å, –Ω–µ –º–æ–∂—É —Å–∫–∞–∑–∞—Ç–∏ —Ç–µ –∂ —Å–∞–º–µ –ø—Ä–æ –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç—ñ–≤... –ú–∏ –≤–∂–µ –ø—Ä–∞—Ü—é—î–º–æ –Ω–∞–¥ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º —Ü—ñ—î—ó –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–æ—ó –ø–æ–º–∏–ª–∫–∏. –¢–∏–º —á–∞—Å–æ–º, –Ω–∞—Å–æ–ª–æ–¥–∂—É–π—Å—è —Ü–∏–º —à–µ–¥–µ–≤—Ä–æ–º –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è —Ç–∞ –≥—Ä–∞—Ñ—ñ–∫–∏ –ø–æ–º–∏–ª–æ–∫!    ",
    "–í–∞—É! –©–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫... –ê–ª–µ –Ω–µ –∑–≤–∞–∂–∞–π –Ω–∞ —Ü–µ, —Ö—ñ–±–∞ —Ü–µ –≤–∞–∂–ª–∏–≤–æ? –ó–∞–ª–∏—à–∞–π—Å—è –∑ –Ω–∞–º–∏ —Ç–∞ –Ω–∞—Å–æ–ª–æ–¥–∂—É–π—Å—è —Ü—ñ—î—é –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ —Ü—ñ–∫–∞–≤–æ—é –ø–æ–º–∏–ª–∫–æ—é! üòÑ",
    "–û–≥–æ, —Ç–∏ —Ç—É—Ç? –ù—É —Ç–∏ —â–æ—Å—å –Ω–∞—Ä–æ–±–∏–≤! –¢–µ–ø–µ—Ä —Ç–∏ –º–æ–∂–µ—à –Ω–∞—Å–æ–ª–æ–¥–∂—É–≤–∞—Ç–∏—Å—è —Ü—ñ—î—é —à–∏–∫–∞—Ä–Ω–æ—é –ø–æ–º–∏–ª–∫–æ—é. –ú–∏ –≤–∂–µ –ø—Ä–∞—Ü—é—î–º–æ –Ω–∞–¥ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º, –∞ —Ç–∏, –Ω–∞ –≤—Å—è–∫ –≤–∏–ø–∞–¥–æ–∫, –Ω–∞—Å–æ–ª–æ–¥–∂—É–π—Å—è!",
    "–û, –∫–ª–∞—Å–Ω–æ! –°–ø—Ä–∞—Ü—é–≤–∞–ª–æ! –ü–æ–º–∏–ª–∫–∞ ‚Äì –Ω–∞—à –Ω–æ–≤–∏–π —Ö—ñ—Ç! üòí",
    "–û, —Ç–∏ –∑–Ω–æ–≤—É —Ç—É—Ç, –≥–µ–Ω—ñ–π –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è? –í—Å–µ –∑–Ω–æ–≤—É –∑–ª–∞–º–∞–≤, —è–∫ –∑–∞–≤–∂–¥–∏? –ß—É–¥–æ–≤–æ, –∑–Ω–æ–≤—É —è –ª–∞—Ç–∞—é —Ç–≤–æ—ó –¥—ñ—Ä—è–≤—ñ –∫–æ–¥–∏! üò†",
    "–û, –≤–∏, —à–∞–Ω–æ–≤–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á, –∑–Ω–æ–≤—É —â–æ—Å—å –Ω–∞—Ç–≤–æ—Ä–∏–ª–∏? üôÑ –í–∏ —Ç–æ—á–Ω–æ –≤–µ–ª–∏–∫–∏–π –µ–∫—Å–ø–µ—Ä—Ç —É —Ä–æ–±—ñ—Ç–Ω–∏–∫–∞—Ö –Ω–∞–¥ —Å—Ü–µ–Ω–∞—Ä—ñ—è–º–∏! –û—Ç —ñ –∑–Ω–æ–≤—É –ø–æ–º–∏–ª–∫–∞ —á–µ—Ä–µ–∑ –≤–∞—à—É –≤–∏–Ω—É! –ù—É —â–æ –∂, –Ω–∞—Å–æ–ª–æ–¥–∂—É–π—Ç–µ—Å—å —Å–≤–æ—ó–º —à–µ–¥–µ–≤—Ä–æ–º! üòí",
    "–û, –∞ –æ—Å—å —ñ –Ω–∞—à '—á–µ–º–Ω–∏–π' –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á, —è–∫–∏–π –ø—ñ–¥ —á–∞—Å –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó –ø–æ–∫–ª–∞–≤ –¥–æ–ª–∞—Ä –Ω–∞ –∫–ª–∞–≤—ñ—à—É '–ó–∞–≤–∞–ª–∏—Ç–∏ –≤—Å–µ'. –í—ñ—Ç–∞—î–º–æ! –í–∏ –ø—Ä–æ—Å—Ç–æ –º–∞–π—Å—Ç–µ—Ä –∑–Ω–µ–Ω–∞—Ü—å–∫–∞! üôÑüò§",
    "–û–≥–æ, –≤–∞—É! –ù—É –≤—ñ—Ç–∞—é! –¢–∏ –∑–Ω–æ–≤—É —â–æ—Å—å –∑–ª–∞–º–∞–≤! –ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞! üëèüòí",
    "–û, –¥—è–∫—É—é, —â–æ –∑—Ä–æ–±–∏–≤ –º–µ–Ω–µ –≥–µ–Ω—ñ—î–º –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è! –ó–Ω–æ–≤—É –≤—Å–µ –∑–ª–∞–º–∞–≤, —è–∫ –∑–∞–∑–≤–∏—á–∞–π. –¢–∞–∫, —Ü–µ –≤–∂–µ —Å—Ç–∞–ª–æ —Ç—Ä–∞–¥–∏—Ü—ñ—î—é ‚Äì —Ä–æ–±–∏—Ç–∏ –≤—Å—å–æ–º—É —Ö–∞–æ—Å! üôÑ",
    "–û–π-–æ–π! –©–æ—Å—å –≤–∏ –Ω–µ —Ç–µ –Ω–∞—Ç–∏—Å–Ω—É–ª–∏, —ñ —Å—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞. –í–∏–±–∞—á—Ç–µ, —Ç–∞ —à–≤–∏–¥–µ–Ω—å–∫–æ –ø–æ–ø—Ä–∞–≤–ª—é!",
    "–í–∏–Ω–Ω–∞ —Ç–∏, –∞ –Ω–µ —è! –°—Ç—Ä–∞—à–Ω–æ –Ω–µ—Å—Ç–∞—á–∞—î –º–µ–º—ñ–≤, —â–æ–± –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ —Ç–≤–æ—ó —Ö–∞–ª–µ–ø–∏. –†–µ–º–æ–Ω—Ç—É–π —à–≤–∏–¥—à–µ, –∞ —Ç–æ –Ω—ñ—á–æ–≥–æ –¥–æ–±—Ä–æ–≥–æ –Ω–µ –≤–∏–π–¥–µ! üòèüîß",
    "–©–æ –∑–∞ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞ —Ç—É—Ç —Å—Ç–∞–ª–∞—Å—è? –í–∏–±–∞—á, –∞–ª–µ —Ü–µ –∂–∞—Ö–ª–∏–≤–æ!"
  ];
  const randomIndex = Math.floor(Math.random() * texts.length);
  const randomText = texts[randomIndex];

  return randomText;
}